{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/img/logoStop.svg","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\n\nexport async function getPhotoServer(q,page,perPage) {\n    const BASE_URL = 'https://pixabay.com';\n    const END_POINT = '/api/?';\n    const params = new URLSearchParams({\n        key: \"43236135-18e22e789778019f0f194eb5c\",\n        q: `${q}`,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: \"true\",\n        page: `${page}`,\n        per_page:  `${perPage}`\n    });\n    const url = `${BASE_URL}${END_POINT}${params}`;\n    try {\n        const res = await axios.get(url);\n        return res.data;\n    } catch (error) {\n        console.error(\"Error:\", error);\n        throw error;\n    }\n}\n","\nexport function photoResponse(data){\n    return ` \n    <li class = \"photoItem\">\n        <a class=\"gallery-link\" href=\"${data.largeImageURL}\">\n            <img\n                class=\"img\"\n                src=\"${data.previewURL}\"\n                alt=\"${data.tags}\"/>\n            <div class= \"titlePhoto\">\n            <div class=\"propertyItem\">\n                <h5 class=\"proportyTitle\">Likes</h5>\n                <p class=\"propertyQuantety\">${data.likes}</p>\n            </div>\n            <div class=\"propertyItem\">\n                <h5 class=\"proportyTitle\">Views</h5>\n                <p class=\"propertyQuantety\">${data.views}</p>\n            </div>\n            <div class=\"propertyItem\">\n                <h5 class=\"proportyTitle\">Comments</h5>\n                <p class=\"propertyQuantety\">${data.comments}</p>\n            </div>\n            <div class=\"propertyItem\">\n                <h5 class=\"proportyTitle\">Downloads</h5>\n                <p class=\"propertyQuantety\">${data.downloads}</p>\n            </div>\n            </div>\n            </a>\n            </li>\n            `\n};\nexport function photosResponse(arr){\n    return arr.map(photoResponse).join(\"\");\n};\n\n\n","export default \"__VITE_ASSET__fe05575e__\"","import {getPhotoServer} from \"./js/pixabay-api.js\";\nimport {photosResponse} from \"./js/render-function.js\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\nimport stop from \"./img/logoStop.svg\";\nconst form = document.querySelector('.searchBox');\nconst inputSearch = form.querySelector('.searchInput');\nconst gallery = document.querySelector('.gallery')\nconst loadSecondBtm = document.querySelector('.button-search-second');\nfunction showLoader(){\nconst loadingText = `<span class=\"loader\"></span>`;\ngallery.innerHTML = loadingText;\n}\nlet inputData;\nlet currentPage;\nlet maxPage;\nconst perPage = 15;\nform.addEventListener(\"submit\", async (e) => {\n    e.preventDefault();\n    currentPage = 1;\n    inputData = inputSearch.value.trim();\n    if(!inputData){\n        iziToast.show({\n            id: 'messageError',\n            position: 'topRight',\n            message: 'Input your value for search',\n            iconUrl: stop,\n            messageColor: 'white',\n            color: '#EF4040',\n        })\n        return\n    }\n    try {\n        const photo = await getPhotoServer(inputData,currentPage, perPage);\n        if(photo.total){showLoader()};\n        maxPage = Math.ceil(photo.totalHits / perPage);\n        const markup = photosResponse(photo.hits);\n        slowScroll()\n        if (maxPage > 1) {\n            showBtm()\n        }\n        if (!photo.total) {\n            iziToast.show({\n                id: 'messageError',\n                position: 'topRight',\n                message: 'Sorry, there are no images matching your search query. Please try again!',\n                iconUrl: stop,\n                messageColor: 'white',\n                color: '#EF4040',\n            });\n            hideBtm()\n            form.reset();\n        }\n        gallery.innerHTML = markup;\n        const lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250\n        });\n    } catch (error) {\n        iziToast.error({\n            position: 'topRight',\n            title: 'Error',\n            message: `${error}`,\n        });\n    }\n    form.reset();\n    if(currentPage < maxPage){\n        setupLoadMoreButton()\n    }\n   \n});\n\nfunction setupLoadMoreButton(){\n    loadSecondBtm.addEventListener(\"click\", async () => {\n        currentPage += 1;\n        if (maxPage === currentPage) {\n            checkBtnStatus()\n        }\n        \n        try {\n            const photo = await getPhotoServer(inputData,currentPage,perPage);\n            const markup = photosResponse(photo.hits);\n            slowScroll()\n            if (!photo.total) {\n                iziToast.show({\n                    id: 'messageError',\n                    position: 'topRight',\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    iconUrl: stop,\n                    messageColor: 'white',\n                    color: '#EF4040',\n                });\n            }\n            gallery.insertAdjacentHTML(\"beforeend\", markup)\n            const lightbox = new SimpleLightbox('.gallery a', {\n                captionsData: 'alt',\n                captionDelay: 250\n            });\n        } catch (error) {\n            iziToast.error({\n                position: 'topRight',\n                title: 'Error',\n                message: `${error}`,\n            });\n        }\n    });\nloadSecondBtm.addEventListener(\"click\", sendNextRequest);\n}\nfunction checkBtnStatus() {\n        hideBtm()\n        iziToast.show({\n            id: 'messageError',\n            position: 'topRight',\n            message: 'Sorry, there are no images more',\n            iconUrl: stop,\n            messageColor: 'white',\n            color: '#EF4040',\n        });\n        return\n}\nfunction hideBtm(){\n    loadSecondBtm.style.display =\"none\";\n\n}\nfunction showBtm(){\n    loadSecondBtm.style.display =\"flex\";\n}\nfunction slowScroll() {\n    const height = gallery.firstElementChild.getBoundingClientRect().height; \n    window.scrollBy({\n        top: height * 2, \n        behavior: 'smooth', \n    });\n}\n\n\n"],"names":["getPhotoServer","q","page","perPage","BASE_URL","END_POINT","params","url","axios","error","photoResponse","data","photosResponse","arr","stop","form","inputSearch","gallery","loadSecondBtm","showLoader","loadingText","inputData","currentPage","maxPage","iziToast","photo","markup","slowScroll","showBtm","hideBtm","lightbox","SimpleLightbox","setupLoadMoreButton","checkBtnStatus","height"],"mappings":"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"}